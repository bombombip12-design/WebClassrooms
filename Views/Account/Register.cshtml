@model FinalASB.ViewModels.RegisterViewModel
@{
    ViewData["Title"] = "Đăng ký";
}

<div class="glassy-auth-container">
    <div class="glassy-form-wrapper">
        <div class="glassy-form">
            <div class="text-center mb-4">
                <h2 class="glassy-title mb-2">Đăng ký tài khoản</h2>
                <p class="glassy-subtitle">Tạo tài khoản mới để bắt đầu</p>
            </div>
            <form asp-action="Register" method="post">
                <div asp-validation-summary="ModelOnly" class="alert alert-danger mb-4 validation-summary" style="display: none;"></div>
                <div class="glassy-input-group mb-3">
                    <label asp-for="FullName" class="glassy-label">Họ và tên</label>
                    <div class="glassy-input-wrapper">
                        <input asp-for="FullName" class="glassy-input" placeholder="Nhập họ và tên của bạn" />
                        <i class="fas fa-user glassy-input-icon"></i>
                    </div>
                    <span asp-validation-for="FullName" class="text-danger small d-block mt-1"></span>
                </div>
                <div class="glassy-input-group mb-3">
                    <label asp-for="Email" class="glassy-label">Email</label>
                    <div class="glassy-input-wrapper">
                        <input asp-for="Email" class="glassy-input" placeholder="Nhập email của bạn" />
                        <i class="fas fa-user glassy-input-icon"></i>
                    </div>
                    <span asp-validation-for="Email" class="text-danger small d-block mt-1"></span>
                </div>
                <div class="glassy-input-group mb-3">
                    <label asp-for="Password" class="glassy-label">Mật khẩu</label>
                    <div class="glassy-input-wrapper">
                        <input asp-for="Password" class="glassy-input" placeholder="Nhập mật khẩu (tối thiểu 6 ký tự)" />
                        <i class="fas fa-lock glassy-input-icon"></i>
                    </div>
                    <span asp-validation-for="Password" class="text-danger small d-block mt-1"></span>
                </div>
                <div class="glassy-input-group mb-4">
                    <label asp-for="ConfirmPassword" class="glassy-label">Xác nhận mật khẩu</label>
                    <div class="glassy-input-wrapper">
                        <input asp-for="ConfirmPassword" class="glassy-input" placeholder="Nhập lại mật khẩu" />
                        <i class="fas fa-lock glassy-input-icon"></i>
                    </div>
                    <span asp-validation-for="ConfirmPassword" class="text-danger small d-block mt-1"></span>
                </div>
                <div class="d-grid mb-3">
                    <button type="submit" class="glassy-btn">
                        Đăng ký
                    </button>
                </div>
            </form>
            <div class="text-center mt-4 pt-3 glassy-footer">
                <p class="mb-0">Đã có tài khoản? 
                    <a asp-action="Login" class="glassy-link">Đăng nhập ngay</a>
                </p>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    @{await Html.RenderPartialAsync("_ValidationScriptsPartial");}
    <script>
        // Chỉ hiển thị validation summary khi có lỗi
        document.addEventListener('DOMContentLoaded', function() {
            const validationSummary = document.querySelector('.validation-summary');
            if (validationSummary) {
                // Kiểm tra xem có lỗi không (có text hoặc có thẻ ul với li)
                const hasErrors = validationSummary.textContent.trim().length > 0 || 
                                 validationSummary.querySelector('ul li');
                if (hasErrors) {
                    validationSummary.style.display = 'block';
                } else {
                    validationSummary.style.display = 'none';
                }
            }
            
            // Ẩn các thông báo lỗi trống
            document.querySelectorAll('span.field-validation-error').forEach(function(span) {
                if (!span.textContent.trim()) {
                    span.style.display = 'none';
                }
            });
        });
    </script>
}
