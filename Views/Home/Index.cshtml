@model List<FinalASB.ViewModels.ClassViewModel>
@{
    ViewData["Title"] = "Trang chủ";
    Layout = "_DashboardLayout";
}


@if (Model == null || !Model.Any())
{
    <div class="dashboard-empty-state">
        <i class="fas fa-folder-open"></i>
        <h4>Bạn chưa tham gia lớp học nào</h4>
        <p>Tạo lớp học mới hoặc tham gia bằng mã lớp học để bắt đầu</p>
    </div>
}
else
{
    <div class="dashboard-class-grid" id="classGrid">
        @{
            var colors = new[] { "orange", "green", "blue", "purple", "red" };
            var colorIndex = 0;
        }
        @foreach (var classItem in Model)
        {
            var colorClass = colors[colorIndex % colors.Length];
            colorIndex++;
            var ownerInitials = !string.IsNullOrEmpty(classItem.OwnerName) 
                ? classItem.OwnerName.Split(' ').Last().Substring(0, 1).ToUpper() 
                : "U";
            <a href="@Url.Action("Details", "Classes", new { id = classItem.Id })" 
               class="dashboard-class-card" 
               data-role="@classItem.UserRole">
                <div class="class-card-header-new @colorClass">
                    <div class="class-header-content">
                        @if (!string.IsNullOrEmpty(classItem.CoverImageUrl))
                        {
                            <img src="@classItem.CoverImageUrl" alt="@classItem.ClassName" />
                        }
                        else
                        {
                            <div class="class-header-initials">@ownerInitials</div>
                        }
                        <div class="class-header-info">
                            <div class="class-code">@classItem.JoinCode</div>
                            <div class="class-name-header">@classItem.ClassName</div>
                        </div>
                    </div>
                </div>
                <div class="class-card-body-new">
                    <div class="class-card-actions">
                        <button class="class-action-btn" type="button" onclick="event.preventDefault();"><i class="fas fa-image"></i></button>
                        <button class="class-action-btn" type="button" onclick="event.preventDefault();"><i class="fas fa-folder"></i></button>
                        <button class="class-action-btn" type="button" onclick="event.preventDefault();"><i class="fas fa-ellipsis-v"></i></button>
                    </div>
                </div>
            </a>
        }
    </div>
}
